<?xml version="1.0" encoding="UTF-8"?>

<launch>
  <arg name="gzpose" default="-x 0.0 -y 0.0 -z 0.85 -R 0.0 -P 0.0 -Y 0.0"/>
  <arg name="debug" default="false"/>
  <arg name="enable_crane" default="false"/> 
  <arg name="simulation" default="true"/>
  <arg name="fixed_base" default="false"/>


  <include file="$(find pal_gazebo_worlds)/launch/pal_gazebo.launch" >
    <arg name="debug" value="$(arg debug)"/>
    <arg name="world" value="empty_high_resolution"/>
    <arg name="paused" value="true"/>
  </include>

  <include file="$(find kangaroo_description)/robots/upload.launch">
    <arg name="enable_crane" value="$(arg enable_crane)"/> 
    <arg name="simulation" value="$(arg simulation)"/> 
    <arg name="fixed_base" value="$(arg fixed_base)"/> 
  </include>

  <!-- define initial joints position values when spawned: 
      Values here for leg length = 642.8 => theta = 50°, beta = 100°-->
  <arg name="joints_positions_args"
      value=" -J leg_left_2_joint 0.05
              -J leg_left_length_joint 0.55
              -J leg_left_4_joint -0.05
              -J leg_right_2_joint 0.05
              -J leg_right_length_joint 0.55
              -J leg_right_4_joint -0.05" />

  <node pkg="gazebo_ros" type="spawn_model" name="spawn_model"
    args="-urdf -param robot_description $(arg gzpose) -model kangaroo 
        $(arg joints_positions_args)" />

  <include file="$(find kangaroo_controller_configuration)/launch/default_controllers.launch"/>
  
  <arg if="$(arg fixed_base)" name="pids_filename_suffix" value="" />
  <arg unless="$(arg fixed_base)"  name="pids_filename_suffix"  value="_contact" />
  <rosparam command="load" file="$(find kangaroo_controller_configuration)/config/pids$(arg pids_filename_suffix).yaml"/>

  <include file="$(find kangaroo_bringup)/launch/kangaroo_bringup.launch" />

  <rosparam command="load" file="$(find kangaroo_bringup)/config/sensors/imu.yaml" />

</launch>
