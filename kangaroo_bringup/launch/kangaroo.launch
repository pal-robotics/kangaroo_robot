<?xml version="1.0" encoding="UTF-8"?>
<launch>
  <arg name="ft_sensors"  default="false"/>
  <arg name="with_legs"   default="true"/>
  <arg name="with_pelvis" default="true"/>
  <arg name="with_arms"   default="true"/>
  <arg name="arm_type"    default="4dof"/>
  <arg name="end_effector_type"   default="fake-forearm"/>
  <arg name="with_belt"   default="false" />
  <arg name="torso_2024"  default="false" />
  <arg name="demo_mode"   default="true" />

   <arg name="arm_type_processed" value="$(eval arg('arm_type') 
              if arg('arm_type')=='4dof' or (arg('arm_type')=='7dof' and arg('end_effector_type')=='no-end-effector')
              else arg('arm_type')+'_'+arg('end_effector_type'))" />

  <!-- Hardware configuration -->
  <rosparam command="load" file="$(find kangaroo_bringup)/config/kangaroo_common_hardware.yaml" unless="$(arg ft_sensors)"/>
  <rosparam command="load" file="$(find kangaroo_bringup)/config/kangaroo_common_hardware_with_ft.yaml" if="$(arg ft_sensors)"/>

  <include file="$(find kangaroo_description)/robots/upload.launch">
    <arg name="ft_sensors"   value="$(arg ft_sensors)"/>
    <arg name="with_legs"    value="$(arg with_legs)"/>
    <arg name="with_pelvis"  value="$(arg with_pelvis)"/>
    <arg name="with_arms"    value="$(arg with_arms)"/>
    <arg name="arm_type"     value="$(arg arm_type)"/>
    <arg name="end_effector_type"   value="$(arg end_effector_type)"/>
    <arg name="with_belt"    value="$(arg with_belt)"/>
    <arg name="torso_2024"   value="$(arg torso_2024)"/>
  </include>

  <include file="$(find kangaroo_bringup)/launch/kangaroo_bringup.launch">
    <arg name="with_pelvis"  value="$(arg with_pelvis)"/>
    <arg name="with_arms"    value="$(arg with_arms)"/>
    <arg name="arm_type"     value="$(arg arm_type_processed)"/>
    <arg name="ft_sensors"   value="$(arg ft_sensors)"/>
    <arg name="demo_mode"    value="$(arg demo_mode)"/>
  </include>

  <!-- Hardware specific bringup -->
  <include file="$(find kangaroo_controller_configuration)/launch/bringup_controllers_hardware.launch" />

</launch>
